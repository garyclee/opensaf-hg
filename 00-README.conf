TODO: Might needs path cleanup / Not following 3.0 build changes yet.

Configuring OpenSAF
===================

OpenSAF configuration information is located in the /etc/opt/opensaf directory.
Following is the brief description of each of the configuration file.

a) nodeinit.conf:
This is the input file to the Node Initialization Daemon for serializing the
opensaf services startup.

For sample usage details please refer to nodeinit.conf file in /etc/opt/opensaf/
directory.

NOTE: The interface number and network id arguments to the nid_tipc.sh entry in
nodeinit.conf would get installed with default values. Please change this
accordingly to reflect your correct interface and network-id information. i.e.
please change the highlighted values below for the following entry in
nodeinit.conf :

/opt/opensaf/controller/scripts/nid_tipc.sh:TIPC:S:/opt/opensaf/controller/scripts/nid_tipc.sh:
 4000::2:1:start eth2 2351:stop

In the above line, eth2 refers to the interface information and 2351 refers to
a sample tipc network id. Please change them accordingly. This tipc-network id
should be the same across all system controllers and payloads.

b) slot_id: 
The slot_id shall specify a unique value that represents a physical slot
identifier for the node in a chassis environment. The same applies for a
simulation environment on a PC. System controllers shall be assigned slot ids 1
and 2. Payloads shall be assigned slot ids > 3.i.e. 3,4,5 etc. This file gets
installed in /etc/opt/opensaf/ directory.

c) chassis_id: 
The chassis_id represents an identifier for the chassis (Distributed Computing
Environment) and should be set to an integer value. The same applies for a
simulation environment on a PC. The default value is set to 2. If the user
changes this value, the NCSSystemBOM.xml must be changed accordingly to reflect
the same. This file gets installed in /etc/opt/opensaf/ directory.

d) rde.conf: This file contains information pertaining to RDF (Role
Determination Feature) configuration. The RDF is a basic/spoof implementation
catering for a PC kind of simulated cluster environment/setup. Users may need
to replace/enhance this module based on their platform requirements. Please
refer the OpenSAF Platform Control Services Programmer's Reference manual for
more information.  

The following parameters have to be set accordingly in the rde.conf file on
both the system controllers:

   export CONTROLLER1=10.232.92.160
   export CONTROLLER2=10.232.92.206
   export RDE_PORT_NUMBER=5003

 - The fields, CONTROLLER1 and CONTROLLER2 specify the IP addresses of the
   system controllers. The RDE_PORT_NUMBER specify the port number that RDE uses
   for its TCP communication with its peer RDE. The default port number should
   be changed if its already in use by user application.

 - This file should be identical on both the controllers.

   NOTE: The node_ha_state file is updated by RDF whenever a HA role change
   happens on the system controller. This file gets installed in
   /var/opt/opensaf/ directory.

e) NCSSystemBOM.xml
This file contains NCS system description (for complete details refer to the
NCS 2.0 System Description user document). This file needs to be edited based
on the target system configuration. Note that the default location,
/etc/opt/opensaf/, is where the ncs_scap binary retrieves configuration
information. This file gets installed in /etc/opt/opensaf/ directory.
    
f) NCSConfig.xsd: 
This file is used by the XML parser to validate the NCSSystemBom.xml file.
The user should not edit this file. This file gets installed in
/etc/opt/opensaf/ directory.

g) subagt_lib_conf: 
This file contains the entries of the loadable application-MIB-libraries
(which contains the application MIB definitions) of the services/components.
(More information on the use of this file can be found in Appendix E of the
Management Access User Document.) This file gets installed in
/etc/opt/opensaf/ directory.

h) cli_cefslib_conf:
This file contains the entries of the loadable CLI-CEF-libraries (which
contains CLI's command execution functions) of the services/components
supporting CLI commands. The entries are of the type <cef-library-name>
<cefs_register_lib_req function-name>. This file needs to be edited for
adding a service (component) supporting CLI commands. This file gets
installed in /etc/opt/opensaf/ directory.

j) vipsample.conf:
Virtual IP is a feature of the OpenSAF Interface Service which migrates the
application IP addresses transparently from active node to the standby node.
More information can be obtained from OpenSAF Interface Service Programmer's

Reference.
This file gets installed in /etc/opt/opensaf/ directory.

k) ncsSnmpSubagt.conf:
This file specifies the configuration parameters for the OpenSAF SNMP
subagent. It gets installed in /usr/share/snmp/ directory (assuming that
net-snmp was configured with --prefix=/usr option) during OpenSAF target
rpm installation. The subagent reads this file from the directory set by
the SNMPCONFPATH environment variable in the 'nis_scxb' script. This path
has to be changed accordingly if net-snmp configuration files get
installed in a directory other than /usr/share/snmp i.e. if --prefix=/usr
option was not used while configuring net-snmp, Also the
ncsSnmpSubagt.conf file has to be moved to the $SNMPCONFPATH directory.
The following basic net-snmp configuration values can be set
accordingly:

   agentxsocket tcp:localhost:705
   agentxPingInterval 1


Source of Configuration
=======================

The default source-of-configuration for PSSv System-clients (Persistent Store
Service)is XML. After OpenSAF comes up for the first time (with XML), the source
of playback.

