#!/bin/bash

#########################################
# OpenSAF PATH's
#########################################
TMPDIR="/tmp"
LOCALSTATEDIR="@localstatedir@/lib/@PACKAGE_NAME@"
SYSCONFDIR="@sysconfdir@/@PACKAGE_NAME@"
PIDPATH="xxPIDPATHxx"
BINPATH="xxBINDIRxx"
LIBPATH="xxLIBDIRxx"

#########################################
# DTSv configuration
#########################################
# Number of archives with dtsv files from old lives that should be stored
# in the ${NCS_LOG_PATH}/archives directory. Every cluster restart is a new
# life.
# Uncomment this line if you want archive management and rotation.
# Edit this line if you to change number of archives kept on disk.
#DTSV_MAX_ARCHIVES=8

#########################################
# TIPC configuration
#########################################
TIPC_MODULE="/lib/modules/$(uname -r)/kernel/net/tipc.ko"
TIPC_MANAGE="YES"

export SNMPCONFPATH="/usr/share/snmp"
export MIBDIRS="@MIBDIRS@"

# The following environment variables are useful
# when running in simulation mode, where multiple
# nodes are simulated on the same Linux desktop
if [ ":$NCS_STDOUTS_PATH" == ":" ]
then
      export NCS_STDOUTS_PATH="$LOCALSTATEDIR/stdouts"
fi

export OLD_STDOUTSPATH="$LOCALSTATEDIR/old_stdouts"


#########################################
# FILES
#########################################
NODE_HA_STATE="$LOCALSTATEDIR/node_ha_state"
DBGFILE="$NCS_STDOUTS_PATH/monc_debug_log"
NIDFIFO="$TMPDIR/nodeinit.fifo"
SPCAPFIFO="$NIDFIFO"
CHASSIS_ID_FILE="$SYSCONFDIR/chassis_id"
SLOT_ID_FILE="$SYSCONFDIR/slot_id"
SUBSLOT_ID_FILE="$SYSCONFDIR/subslot_id"
NODE_TYPE_FILE="$SYSCONFDIR/node_type"
NISPIPE="$TMPDIR/nisfifo"
RDE_HA_COMP_NAMED_PIPE="$TMPDIR/rde_ha_comp_named_pipe"
FMS_HA_COMP_NAMED_PIPE="$TMPDIR/fms_ha_comp_named_pipe"

# Check for environment variable for slot number.
if [ "$SLOT_NUMBER" = "" ] ; then
  export SLOT_NUMBER=$(< "$SLOT_ID_FILE")
fi

export NODE_TYPE=$(< "$NODE_TYPE_FILE")

#########################################
# KEYS
#########################################
export PSEUDO_DRBD_ENV_HEALTH_CHECK_KEY="A5A5"
export CPSV_ENV_HEALTH_CHECK_KEY="A1B2"
export DTS_AMF_HELATH_CHECK_KEY="A9FD64E12C12"
export EDSV_ENV_HEALTHCHECK_KEY="E5F6"
export MQSV_ENV_HEALTHCHECK_KEY="E5F6"
export HCD_HEALTH_KEY_DEFAULT_SET="F6C7"
export GLSV_ENV_HEALTHCHECK_KEY="A1B2"
export IFSV_ENV_HEALTHCHECK_KEY="C3D4"
export RDE_HA_ENV_HEALTHCHECK_KEY="BAD8"
export FMS_HA_ENV_HEALTHCHECK_KEY="BAD9"
export IMMSV_ENV_HEALTHCHECK_KEY="A1B2"

export NID_MAGIC=AAB49DAA

#####################################################
# Rate at which Passive Monitoring monitors the PIDs.
# Default is 1 sec (1000 ms)
#####################################################
export AVND_PM_MONITORING_RATE=1000

#########################################
# DRBD Configuration
#########################################
DRBD="/etc/init.d/drbd"
DRBDADM="/sbin/drbdadm"
PSEUDO_DRBD_PIPE="$TMPDIR/pseudo_drbd.fifo"
DRBD_ADM="/sbin/drbdadm"
DRBD_SETUP="/sbin/drbdsetup"
DRBD_SYNC_FILE="/var/lib/opensaf/.drbd_sync_state_"
MOT_DRBD_DEV="/dev/drbd0"
MOT_MNT_PNT="/repl_opensaf"
MOT_REPL_PRTN="/dev/sda5"
MOT_META_PRTN="/dev/sda6"
DRBD_CONF_PATH="/etc"
MY_DRBD_CONF_PATH="$SYSCONFDIR/"


#########################################
# TARGET SYSTEM ARCHITECTURE
# Choices are:
#   ATCA (default)
#   HP_CCLASS
#   HP_PROLIANT
#########################################
export OPENSAF_TARGET_SYSTEM_ARCH="ATCA"


#########################################
# MISC
#########################################
ECHO="echo -e"
CAT="cat"
EXTN=".pid"

DAEMON_STARTED=1
DAEMON_START_FAILED=2
DAEMON_NOT_FND=$DAEMON_START_FAILED 


CORE_FILE_SIZE="unlimited"
CORE_PATTERN="/var/crash/core_%t_%e_%p"
CORE_PATTERN_CURRENT=$(cat /proc/sys/kernel/core_pattern)
